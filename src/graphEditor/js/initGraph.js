/**
 * 初始化graphEditor的SVG绘图
 * by vezzzing 2023.8.3
 * z z z studio
 */

import { CreateBasicEdge, CreateBasicNode, CreateLinkNode } from "./graph/element";
import { LoadGraphFromJson, Graph } from "./graph/graph";

/**
 * 根据储存的数据对象绘制图表
 * @param {object} graphObj 文档储存JSON对象
 * @returns 返回创建的Graph对象
 */
export function initGraph(graphObj) {
    // let graph = new Graph();
    // let centerNode = CreateBasicNode();
    // graph.addNode(centerNode);
    // let pNode = null;
    // for (let i = 0; i < 2; i++) {
    //     let addedNodeLink = CreateLinkNode();
    //     graph.addNode(addedNodeLink);
    //     let addedEdge = CreateBasicEdge(centerNode, addedNodeLink);
    //     graph.addEdge(addedEdge);
    //     if (pNode) {
    //         let addedEdge2 = CreateBasicEdge(pNode, addedNodeLink);
    //         graph.addEdge(addedEdge2);
    //     }
    //     pNode = addedNodeLink;
    // }

    let graph = LoadGraphFromJson(JSON.parse(`
{"nodeList":[{"uuid":"zznodec84cd1c7b8ca41589a1a6f6b5f7ce7af","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5}},"vx":-0.00004716136553706255,"vy":0.00005364554584058981,"x":791.6092168632928,"y":842.487536875386},{"uuid":"zznode4665f41041df43cf9f8d48693ccf3120","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5},"link_node":{"url":"http://vezzzing.cn/vezzzingsLibrary/dist/main.html","openOuter":true}},"vx":-0.00005551769083085853,"vy":0.000004214055933906803,"x":397.2805443614295,"y":903.5823280219093},{"uuid":"zznode169ea1c85ee64e559348fcea4c383d1a","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5},"link_node":{"url":"http://vezzzing.cn/vezzzingsLibrary/dist/main.html","openOuter":true}},"vx":-0.000008401491326968385,"vy":0.000022309125108728467,"x":540.8031460336007,"y":530.1431856950562},{"uuid":"zznode5ef0365378b24722bd7869923f8b7da1","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5}},"vx":0.00001350706930569698,"vy":-0.000014652676183469426,"x":884.1904911377369,"y":735.4000107111789},{"uuid":"zznode8f5867baf4e1459e811ca69ac99f3cf4","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5}},"vx":-0.00003741115465132096,"vy":-0.000015462646058753203,"x":884.3559691561936,"y":335.2819218823871},{"uuid":"zznode3e9c212b9fd14f39bfb0a1ab0e512755","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5}},"vx":-0.00006363481790168592,"vy":-0.00005247549665212098,"x":576.775748006662,"y":591.7645440835521},{"uuid":"zznode64357c7a316642f2997b6fff3fbf6daa","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"rect","dividerColor":null,"bgColor":"#292929","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ\\n2333\\n14155","textColor":"#f5ff70","textSize":4,"textSpacing":0,"textWeight":5},"audio_node":{"soundVolume":1}},"vx":-0.00007342098263187341,"vy":-1.649216067877653e-7,"x":977.9984967660786,"y":592.285121166028},{"uuid":"zznode9bacbc5fe57e4eefa18d38793767389b","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5}},"vx":-0.000014363300671148863,"vy":-0.000024672668968375835,"x":794.9760786741712,"y":236.6113217614975},{"uuid":"zznodeb3e34ede2fcf40cc9fc2661da726cb81","components":{"exterior_node":{"size":{"x":10,"y":1},"sizeAuto":true,"shape":"circle","dividerColor":null,"bgColor":"#000f00","dividerStroke":null,"strokeColor":"#ffd500","strokeStyle":"0","strokeWidth":0.5},"physics_node":{"dividerCollision":null,"collisionRadius":10,"collisionRadiusAuto":true,"dividerManyBodyForce":null,"manyBodyForceStrength":80,"manyBodyForceRangeMin":10,"manyBodyForceRangeMax":112},"scaleHover_node":{"scale":1.2,"scaleTime":0.5},"text_node":{"showText":"VEZZ","textColor":"#ffffff","textSize":4,"textSpacing":0,"textWeight":5}},"vx":-0.000059092713725149493,"vy":-0.00004119044293301174,"x":663.5091573457227,"y":614.4438016354962}],"edgeList":[{"uuid":"zzedge0f65bb148084419ab3775a6fa3ced58b","source":"zznodec84cd1c7b8ca41589a1a6f6b5f7ce7af","target":"zznode4665f41041df43cf9f8d48693ccf3120","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedge1aa9b884dfbc48129a146674923d53e3","source":"zznodec84cd1c7b8ca41589a1a6f6b5f7ce7af","target":"zznode169ea1c85ee64e559348fcea4c383d1a","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedge87dbdb15569347de877a6868ebbf1b54","source":"zznode4665f41041df43cf9f8d48693ccf3120","target":"zznode169ea1c85ee64e559348fcea4c383d1a","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedge97e590a5f0dd488dba8acd267cc68822","source":"zznode169ea1c85ee64e559348fcea4c383d1a","target":"zznode5ef0365378b24722bd7869923f8b7da1","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedgece7eedfc948540b3b225e79bc63c8bdc","source":"zznode5ef0365378b24722bd7869923f8b7da1","target":"zznode8f5867baf4e1459e811ca69ac99f3cf4","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedgea6947f3de1a5445b83583f4e6f9c3307","source":"zznode8f5867baf4e1459e811ca69ac99f3cf4","target":"zznode3e9c212b9fd14f39bfb0a1ab0e512755","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedge3adfec963d5f46b7807f6c24d6ce2928","source":"zznode3e9c212b9fd14f39bfb0a1ab0e512755","target":"zznode64357c7a316642f2997b6fff3fbf6daa","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedge77462fbf406d4c17a98e19c675c71cde","source":"zznode64357c7a316642f2997b6fff3fbf6daa","target":"zznode9bacbc5fe57e4eefa18d38793767389b","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}},{"uuid":"zzedgef2399d1a0bde4639afecb3ede7055c92","source":"zznode9bacbc5fe57e4eefa18d38793767389b","target":"zznodeb3e34ede2fcf40cc9fc2661da726cb81","components":{"exterior_edge":{"strokeColor":"#666666","strokeStyle":"dot","strokeWidth":0.6},"physics_edge":{"linkStrength":0.8,"linkDistance":400},"scaleHover_edge":{"scale":11,"scaleTime":0.5}}}]}
    `));
    
    graph.render();
    return graph;
}